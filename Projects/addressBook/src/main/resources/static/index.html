<!doctype html>
<html lang="en">

<!--HTML metadata-->

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Address page</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

</head>
<!--HTML body-->

<body>
    <!--Content Division Element-->
    <div class="container">

        <h1>Address Book</h1>

        <form id="address-form" class="row g-3" method="POST" action="/addresses">
            <div class="col-md-6">
                <label for="inputEmail4" class="form-label">Email</label>
                <input type="email" class="form-control" id="inputEmail4" name="email">
            </div>
            <div class="col-md-6">
                <label for="inputPhone" class="form-label">Phone</label>
                <input type="phone" class="form-control" id="inputPhone" name="phone">
            </div>
            <div class="col-12">
                <label for="inputAddress1" class="form-label">Address1</label>
                <input type="text" class="form-control" id="inputAddress1" placeholder="1207 Willow Avenue"
                    name="address1">
            </div>
            <div class="col-12">
                <label for="inputAddress2" class="form-label">Address 2</label>
                <input type="text" class="form-control" id="inputAddress2" placeholder="Apartment, studio, or floor"
                    name="address2">
            </div>
            <div class="col-md-6">
                <label for="inputCity" class="form-label">City</label>
                <input type="text" class="form-control" id="inputCity" name="city">
            </div>
            <div class="col-md-4">
                <label for="inputState" class="form-label">State</label>
                <input type="text" class="form-control" id="inputState" name="state">
                <!--<select id="inputState" class="form-select">
                    <option selected>Choose...</option> 
                    <option>...</option>
                </select>-->
            </div>
            <div class="col-md-2">
                <label for="inputZip" class="form-label">Zip</label>
                <input type="text" class="form-control" id="inputZip" name="zip">
            </div>
            <!--
            <div class="col-12">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="gridCheck">
                    <label class="form-check-label" for="gridCheck">
                        Remember me
                    </label>
                </div>
            </div>
            -->
            <div class="col-12">
                <button type="submit" class="btn btn-primary">Save</button>
            </div>
        </form>
    </div>

    <script>
        const save = function (event) {
            console.log("save button!")
            event.preventDefault();

            const data = {
                email: document.getElementById("inputEmail4").value,
                phone: document.getElementById("inputPhone").value,
                address1: document.getElementById("inputAddress1").value,
                address2: document.getElementById("inputAddress2").value,
                city: document.getElementById("inputCity").value,
                state: document.getElementById("inputState").value,
                zip: document.getElementById("inputZip").value,
            }

            fetch("/addresses", {
                method: "POST", // or 'PUT'
                headers: {
                    "Content-Type": "application/json",
                },
                body: JSON.stringify(data),
            })
                .then(response => response.json())
                .then(data => {
                    console.log('Success: ', data)
                })
                .catch((error) => {
                    console.error("Error:", error);
                });
        }

        const form = document.getElementById("address-form");
        form.addEventListener("submit", save);

    </script>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-HwwvtgBNo3bZJJLYd8oVXjrBZt8cqVSpeBNS5n7C8IVInixGAoxmnlMuBnhbgrkm"
        crossorigin="anonymous"></script>

</body>

</html>